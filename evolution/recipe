pkg=evolution
ver=3.22.6
rel=1
sum="Manage your email, contacts and schedule"
lic=GPL
url=https://wiki.gnome.org/Apps/Evolution
dep=(gnome-desktop evolution-data-server libcanberra dconf webkitgtk desktop-file-utils)
mkd=(gobject-introspection gtk-doc intltool itstool docbook-xsl)
opt=(!emptydirs)
src=(https://download.gnome.org/sources/$pkg/${ver:0:4}/$pkg-$ver.tar.xz)
sha=(50813222ecf5593b526fedb7b88748df9d58f3417d6c999f59d6f420e80c8514)

build() {
    mkdir $srcdir/build && cd $srcdir/build

    cmake -G "Unix Makefiles" \
        -DCMAKE_INSTALL_PREFIX=/usr
        -DENABLE_MAINTAINER_MODE=0FF \
        -DENABLE_PLUGINS=all \
        -DENABLE_YTNEF=OFF \
        -DENABLE_INSTALLED_TESTS=ON \
        -DWITH_OPENLDAP=ON \
        -DENABLE_GTK_DOC=ON \
        ../$pkg-$ver
    make
}

package() {
    cd $srcdir/build

    make DESTDIR=$pkgdir install
}
