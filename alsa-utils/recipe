pkg=alsa-utils
ver=1.1.2
rel=1
sum="An alternative implementation of Linux sound support"
lic=GPL
url=http://www.alsa-project.org
dep=(alsa-lib pciutils ncurses psmisc fftw)
mkd=(xmlto docbook-xsl)
src=(ftp://ftp.alsa-project.org/pub/utils/alsa-utils-$ver.tar.bz2)
sha=(7af603c0877d1251599d65b4fbc372e63a54371b888f5c26c6a86ac1d0519071)

build() {
    ./configure --prefix=/usr \
                --disable-alsaconf \
                --sbindir=/usr/bin \
                --with-udev-rules-dir=/usr/lib/udev/rules.d \
                --with-systemdsystemunitdir=/usr/lib/systemd/system
    make

    # fix udev rules genaration
    cd alsactl; make 90-alsa-restore.rules
}

package() {
    make DESTDIR=$pkgdir install

    install -D -m755 $rcsdir/90alsa $pkgdir/etc/pm/sleep.d/90alsa

    # install alsa udev rule file
    install -D -m644 alsactl/90-alsa-restore.rules $pkgdir/usr/lib/udev/rules.d/90-alsa-restore.rules

    # dir where to save ALSA state
    install -d $pkgdir/var/lib/alsa
}
