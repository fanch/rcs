pkg=rygel
ver=0.30.1
rel=1
sum="UPnP AV MediaServer and MediaRenderer that allows you to easily share audio, video and pictures, and control of media player on your home network"
lic=LGPL
url=http://live.gnome.org/Rygel
grp=gnome-extra
bak=(/etc/rygel.conf)
dep=(gupnp-av gupnp-dlna libgee gtk3 libunistring tracker hicolor-icon-theme xdg-utils libmediaart)
mkd=(gobject-introspection intltool vala)
src=(https://download.gnome.org/sources/$pkg/${ver:0:4}/$pkg-$ver.tar.xz)
sha=(f4e188008f450c40d79bd5bb41c53c2db97301183dce414ef83eeb80f445c376)

build() {
    ./configure --prefix=/usr \
                --sysconfdir=/etc \
                --localstatedir=/var \
                --disable-static \
                --enable-mediathek-plugin \
                --enable-gst-launch-plugin
    make
}

package() {
    make DESTDIR=$pkgdir install

    install -Dm644 $rcsdir/rygel.service $pkgdir/usr/lib/systemd/user/rygel.service
    install -m644 $rcsdir/org.gnome.Rygel1.service $pkgdir/usr/share/dbus-1/services/
}
