pkg=zlib
ver=1.2.10
rel=1
sum="Compression library implementing the deflate compression method found in gzip and PKZIP"
lic=custom
url=http://www.zlib.net
src=(http://zlib.net/zlib-$ver.tar.gz)
sha=(8d7e9f698ce48787b6e1c67e6bff79e487303e66077e25cb9784ac8835978017)

build() {
    grep -A 24 '^  Copyright' zlib.h > LICENSE

    ./configure --prefix=/usr
    make

    cd contrib/minizip
    cp Makefile Makefile.orig
    cp ../README.contrib readme.txt
    autoreconf --install
    ./configure --prefix=/usr --enable-static=no
    make
}

package() {
    make DESTDIR=$pkgdir install

    install -D -m644 LICENSE $pkgdir/usr/share/licenses/$pkg/LICENSE

    cd contrib/minizip
    make DESTDIR=$pkgdir install
}
